# AWS Lambda + DynamoDB Integration (Serverless Demo)

> **Author:** Muskan Patel
> **Role Perspective:** Experienced DevOps / Cloud Engineer
> **Level:** Beginner â†’ Productionâ€‘ready fundamentals

---

## ğŸ“Œ Overview

This repository demonstrates a **clean, realâ€‘world integration between AWS Lambda and Amazon DynamoDB** using Python.
It focuses on **correct IAM usage, DynamoDB schema rules, and serverless best practices**.

This is **not a toy example** â€” it reflects how Lambda functions securely access AWS services in production.

---

## ğŸ— Architecture

```
Client / Test Event
        â”‚
        â–¼
 AWS Lambda (Python)
        â”‚  (IAM Role)
        â–¼
 Amazon DynamoDB
```

### Key Principles

* No hardcoded credentials
* IAM roleâ€“based access
* Fully serverless
* Payâ€‘perâ€‘use

---

## ğŸ” IAM Configuration

Lambda accesses DynamoDB using an **Execution Role**, not usernames or access keys.

### Required Policies (Demo Purpose)

```text
AWSLambdaBasicExecutionRole
AmazonDynamoDBFullAccess
```

> âš ï¸ **Production Note:**
> Replace `AmazonDynamoDBFullAccess` with a **leastâ€‘privilege policy**.

---

## ğŸ—„ DynamoDB Table Configuration

| Property      | Value                        |
| ------------- | ---------------------------- |
| Table Name    | `lambda-dynamodb-connection` |
| Partition Key | `server_id` (String)         |
| Sort Key      | None                         |

### Important DynamoDB Rules

* Primary key names are **caseâ€‘sensitive**
* `GetItem` **requires the full primary key**
* Attribute schema is flexible (schemaâ€‘less)

---

## ğŸ§  Lambda Function Code

```python
import boto3

# Create DynamoDB service resource using IAM role
dynamodb = boto3.resource('dynamodb')

# Connect to DynamoDB table
table = dynamodb.Table('lambda-dynamodb-connection')


def lambda_handler(event, context):
    """
    Inserts and retrieves a record from DynamoDB.
    Demonstrates secure Lambda â†” DynamoDB integration.
    """

    # Write item to DynamoDB
    table.put_item(
        Item={
            'server_id': 'u123',
            'name': 'Muskan',
            'role': 'Cloud Engineer'
        }
    )

    # Read item back using primary key
    response = table.get_item(
        Key={'server_id': 'u123'}
    )

    return {
        "message": "DynamoDB connected successfully",
        "item": response.get('Item')
    }
```

---

## ğŸ” Code Walkthrough (DevOps Perspective)

### `boto3.resource('dynamodb')`

* Uses AWS SDK for Python
* Automatically assumes Lambdaâ€™s IAM role
* No credential management required

---

### `table.put_item()`

* Writes data to DynamoDB
* Primary key (`server_id`) is mandatory
* Remaining attributes are flexible

---

### `table.get_item()`

* Retrieves **exactly one item**
* Fails if key name or type does not match schema

---

## ğŸ§ª Testing

### Test Event

```json
{
  "action": "test"
}
```

### Expected Output

```json
{
  "message": "DynamoDB connected successfully",
  "item": {
    "server_id": "u123",
    "name": "Muskan",
    "role": "Cloud Engineer"
  }
}
```

---

## âŒ Common Errors & Root Causes

| Error               | Cause              |
| ------------------- | ------------------ |
| ValidationException | Key mismatch       |
| Item not returned   | Wrong key name     |
| AccessDenied        | IAM policy missing |

> If DynamoDB throws an error, the **connection is working** â€” the schema is wrong.

---

## ğŸš€ Best Practices (Productionâ€‘Ready)

* Use environment variables for table name
* Implement structured logging
* Add exception handling
* Apply leastâ€‘privilege IAM policies
* Validate input from events

---

## ğŸ“ˆ Next Enhancements

* API Gateway â†’ Lambda â†’ DynamoDB
* Full CRUD operations
* Conditional writes
* Pagination
* CI/CD using GitHub Actions

---

## ğŸ§© Skills Demonstrated

* Serverless architecture
* IAM security model
* DynamoDB data modeling
* AWS SDK (boto3)
* Cloudâ€‘native design principles

---

## ğŸ“„ License

MIT License

---

### â­ If youâ€™re learning AWS seriously, this pattern is **mandatory knowledge** for realâ€‘world DevOps and Cloud roles.
